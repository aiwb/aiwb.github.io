{"title":"History","date":"2019-11-04T02:14:22.000Z","link":"docs-javascript-MDN-web-api-2019-11-04-History","comments":true,"updated":"2020-04-15T21:36:20.855Z","content":"<h2 id=\"属性\">属性<a href=\"docs-javascript-MDN-web-api-2019-11-04-History#属性\"></a></h2><p>History.length <code>只读</code></p>\n<pre><code>返回整数，表示历史记录数量，包括当前页面</code></pre><p>History.scrollRestoration <code>实验</code></p>\n<pre><code>允许Web应用程序在历史导航上显式地设置默认滚动恢复行为。此属性可以是自动的（auto）或者手动的（manual）。</code></pre><p>History.state <code>只读</code></p>\n<pre><code>返回一个表示历史堆栈顶部的状态的值。这是一种可以不必等待popstate 事件而查看状态而的方式。</code></pre><a id=\"more\"></a>\n\n<h3 id=\"已废弃\">已废弃<a href=\"docs-javascript-MDN-web-api-2019-11-04-History#已废弃\"></a></h3><p>History.current</p>\n<pre><code>可以使用 Location.href 来代替它</code></pre><p>History.next</p>\n<pre><code>代表session历史记录中后一个项目URL的DOMString</code></pre><p>History.previous</p>\n<pre><code>代表session历史记录中前一个项目URL的DOMString</code></pre><h2 id=\"方法\">方法<a href=\"docs-javascript-MDN-web-api-2019-11-04-History#方法\"></a></h2><h2 id=\"概念和使用\">概念和使用<a href=\"docs-javascript-MDN-web-api-2019-11-04-History#概念和使用\"></a></h2><p>在历史记录里前进和后退</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">window<span class=\"selector-class\">.history</span><span class=\"selector-class\">.back</span>()</span><br><span class=\"line\">window<span class=\"selector-class\">.history</span><span class=\"selector-class\">.forward</span>()</span><br></pre></td></tr></table></div></figure>\n\n<p>跳转到历史记录里指定的页面，参数是相对当前页面的位置，当前页面是 0。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">window<span class=\"selector-class\">.history</span><span class=\"selector-class\">.go</span>(-<span class=\"number\">1</span>)</span><br></pre></td></tr></table></div></figure>\n\n<p>给 go 方法传 0 或者不传参数可以用来刷新当前页面</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">window</span><span class=\"selector-class\">.history</span><span class=\"selector-class\">.go</span>(0);</span><br><span class=\"line\"><span class=\"selector-tag\">window</span><span class=\"selector-class\">.history</span><span class=\"selector-class\">.go</span>();</span><br></pre></td></tr></table></div></figure>\n\n<p>可以通过 window.history.length 查看历史堆栈长度</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let numberOfEntries = window<span class=\"selector-class\">.history</span><span class=\"selector-class\">.length</span></span><br></pre></td></tr></table></div></figure>\n\n<p>window 下可以给 go 方法传递 URL 连接进行跳转，但这不是标准用户，其他引擎不支持。</p>\n<h2 id=\"例子\">例子<a href=\"docs-javascript-MDN-web-api-2019-11-04-History#例子\"></a></h2><p>可以通过 window.onpopstate 监视 history stack pop 出记录的行为</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onpopstate = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">  alert(<span class=\"string\">\"location: \"</span> + <span class=\"built_in\">document</span>.location + <span class=\"string\">\", state: \"</span> + <span class=\"built_in\">JSON</span>.stringify(event.state));</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">history.pushState(&#123;<span class=\"attr\">page</span>: <span class=\"number\">1</span>&#125;, <span class=\"string\">\"title 1\"</span>, <span class=\"string\">\"?page=1\"</span>);</span><br><span class=\"line\">history.back(); <span class=\"comment\">// alerts \"location: http://example.com/example.html?page=1, state: &#123;\"page\":1&#125;\"</span></span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"参考\">参考<a href=\"docs-javascript-MDN-web-api-2019-11-04-History#参考\"></a></h2><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/History\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-CN/docs/Web/API/History</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/History_API\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/en-US/docs/Web/API/History_API</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/DOMString\" target=\"_blank\" rel=\"noopener\">https://developer.mozilla.org/zh-CN/docs/Web/API/DOMString</a></li>\n</ul>\n","prev":{"title":"Window","link":"docs-javascript-MDN-web-api-2019-11-08-Window"},"next":{"title":"electron 从一到二","link":"electron-从一到二"},"plink":"https://wuwb.github.io/docs-javascript-MDN-web-api-2019-11-04-History/","toc":[{"title":"属性","id":"属性","index":"1","children":[{"title":"已废弃","id":"已废弃","index":"1.1"}]},{"title":"方法","id":"方法","index":"2"},{"title":"概念和使用","id":"概念和使用","index":"3"},{"title":"例子","id":"例子","index":"4"},{"title":"参考","id":"参考","index":"5"}],"reward":true,"copyright":{"author":"吴文斌","link":"<a href=\"https://wuwb.github.io/docs-javascript-MDN-web-api-2019-11-04-History/\" title=\"History\">https://wuwb.github.io/docs-javascript-MDN-web-api-2019-11-04-History/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-nd/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)"}}