{"title":"thrift安装","date":"2016-01-26T06:38:02.000Z","link":"thrift安装","comments":true,"tags":["centos","git"],"categories":["其他"],"updated":"2020-04-15T21:36:20.851Z","content":"<h3 id=\"安装-git\">安装 git<a href=\"thrift安装#安装-git\"></a></h3><p>centos6.5上编译安装 git 时候报错：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">In file included from http.c:1:</span><br><span class=\"line\">http.h:6:23: warning: curl/curl.h: no such file or directory</span><br><span class=\"line\">http.h:7:23: warning: curl/easy.h: no such file or directory</span><br><span class=\"line\">In file included from http.c:1:</span><br><span class=\"line\">http.h:46: error: expected specifier-qualifier-list before ‘CURLcode’</span><br><span class=\"line\">http.h:51: error: expected specifier-qualifier-list before ‘CURL’</span><br><span class=\"line\">http.h:97: error: ‘CURL_ERROR_SIZE’ undeclared here (not in a function)</span><br><span class=\"line\">http.h: In function ‘missing__target’:</span><br><span class=\"line\">http.h:102: error: ‘CURLE_FILE_COULDNT_READ_FILE’ undeclared (first use in this function)</span><br><span class=\"line\">http.h:102: error: (Each undeclared identifier is reported only once</span><br><span class=\"line\">http.h:102: error: for each function it appears in.)</span><br><span class=\"line\">http.h:104: error: ‘CURLE_HTTP_NOT_FOUND’ undeclared (first use in this function)</span><br></pre></td></tr></table></div></figure>\n\n<p>解决方法是安装相关依赖：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install perl-ExtUtils-MakeMaker.x86_64</span><br><span class=\"line\">yum install libcurl-devel.x86_64</span><br><span class=\"line\">yum install expat-devel.x86_64</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"安装-zookeeper\">安装 zookeeper<a href=\"thrift安装#安装-zookeeper\"></a></h3><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> zkServer.sh start</span></span><br><span class=\"line\">JMX enabled by default</span><br><span class=\"line\">Using config: /usr/local/zk/bin/../conf/zoo.cfg</span><br><span class=\"line\">Starting zookeeper ... STARTED</span><br></pre></td></tr></table></div></figure>\n\n<ol>\n<li>打开zkServer.sh 找到</li>\n</ol>\n<p><code>STAT=`echo stat | nc localhost $(grep clientPort &quot;$ZOOCFG&quot; | sed -e &#39;s/.*=//&#39;) 2&gt; /dev/null| grep Mode</code></p>\n<p>在nc与localhost之间加上 -q 1 （是数字1而不是字母l）<br>如果已存在则去掉，有的版本zkServer.sh脚本文件里根本没有这一行,所以没有生效</p>\n<ol start=\"2\">\n<li><p>调用sh zkServer.sh status 遇到这个问题。百度，google了后发现有人是修改sh脚本里的一个nc的参数来解决，可在3.4.6的sh文件里并没有找到nc的调用。配置文档里指定的log目录没有创建导致出错，手动增加目录后重启，问题解决。<br>注:我想不是日志的问题所以这个方法根本就没有试</p>\n</li>\n<li><p>创建数据目录,也就是在你zoo.cfg配置文件里dataDir指定的那个目录下创建myid文件,并且指定id,<br>改id为你zoo.cfg文件中server.1=localhost:2887:3887中的1.只要在myid头部写入1即可.</p>\n</li>\n<li><p>而其他两个节点却是现实正常;最后检查配置zoo.cfg配置发现是该节点的主机名写错了;<br>先停止三个节点zookeeper服务,逐一的修改节点上zoo.cfg配置文件,在逐一的启动 ,结果显示正常;</p>\n</li>\n<li><p>另外一个是说端口号匹配问题造成的，<a href=\"http://www.jameswxx.com/%E4%B8%AD%E9%97%B4%E4%BB%B6/238/\" target=\"_blank\" rel=\"noopener\">方案地址</a></p>\n</li>\n</ol>\n<p>问题<br>出现ERROR: Can’t get master address from ZooKeeper; znode data == null解决办法</p>\n","prev":{"title":"2016-03-12-本周阅读推荐","link":"2016-03-12-阅读推荐"},"next":{"title":"本周阅读推荐","link":"本周阅读推荐"},"plink":"https://wuwb.github.io/thrift安装/","reward":true,"copyright":{"author":"吴文斌","link":"<a href=\"https://wuwb.github.io/thrift安装/\" title=\"thrift安装\">https://wuwb.github.io/thrift安装/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-nd/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)"}}