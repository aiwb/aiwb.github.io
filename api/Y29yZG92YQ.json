{"title":"CDVAvaliability.h 源码分析","date":"2015-02-22T15:00:00.000Z","link":"cordova","comments":true,"categories":["代码"],"updated":"2020-04-15T21:36:20.851Z","content":"<figure class=\"highlight\"><figcaption><span>c</span></figcaption><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 定义了 cordova ios</span><br><span class=\"line\">#define __CORDOVA_IOS__</span><br><span class=\"line\"></span><br><span class=\"line\">// 定义了各个版本号</span><br><span class=\"line\">#define __CORDOVA_0_9_6 906</span><br><span class=\"line\">......</span><br><span class=\"line\">#define __CORDOVA_3_6_1 30601</span><br><span class=\"line\">#define __CORDOVA_3_6_3 30603</span><br><span class=\"line\">#define __CORDOVA_NA 99999 /* not available */</span><br><span class=\"line\"></span><br><span class=\"line\">// 如果定义了 CORDOVA_VERSION_MIN_REQUIRED，则将其赋值为最新版本</span><br><span class=\"line\">#ifndef CORDOVA_VERSION_MIN_REQUIRED</span><br><span class=\"line\">  #define CORDOVA_VERSION_MIN_REQUIRED __CORDOVA_3_6_3</span><br><span class=\"line\">#endif</span><br><span class=\"line\"></span><br><span class=\"line\">// 用于为特定的 IOS 版本执行特定的操作</span><br><span class=\"line\">#define IsAtLeastiOSVersion(X) ([[[UIDevice currentDevice] systemVersion] compare:X options:NSNumericSearch] != NSOrderedAscending)</span><br><span class=\"line\"></span><br><span class=\"line\">// 判断 iPad</span><br><span class=\"line\">#define CDV_IsIPad() ([[UIDevice currentDevice] respondsToSelector:@selector(userInterfaceIdiom)] &amp;&amp; ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad))</span><br><span class=\"line\"></span><br><span class=\"line\">// 通过显示界面大小判断 iPhone5</span><br><span class=\"line\">#define CDV_IsIPhone5() ([[UIScreen mainScreen] bounds].size.height == 568 &amp;&amp; [[UIScreen mainScreen] bounds].size.width == 320)</span><br><span class=\"line\"></span><br><span class=\"line\">// 返回版本号</span><br><span class=\"line\">/* Return the string version of the decimal version */</span><br><span class=\"line\">#define CDV_VERSION [NSString stringWithFormat:@&quot;%d.%d.%d&quot;, \\</span><br><span class=\"line\">(CORDOVA_VERSION_MIN_REQUIRED / 10000),                 \\</span><br><span class=\"line\">(CORDOVA_VERSION_MIN_REQUIRED % 10000) / 100,           \\</span><br><span class=\"line\">(CORDOVA_VERSION_MIN_REQUIRED % 10000) % 100]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">// 定义显示过时的方法</span><br><span class=\"line\">#ifdef __clang__</span><br><span class=\"line\">  #define CDV_DEPRECATED(version, msg) __attribute__((deprecated(&quot;Deprecated in Cordova &quot; #version &quot;. &quot; msg)))</span><br><span class=\"line\">#else</span><br><span class=\"line\">  #define CDV_DEPRECATED(version, msg) __attribute__((deprecated()))</span><br><span class=\"line\">#endif</span><br><span class=\"line\"></span><br><span class=\"line\">// 开启 Log</span><br><span class=\"line\">// Enable this to log all exec() calls.</span><br><span class=\"line\">#define CDV_ENABLE_EXEC_LOGGING 0</span><br><span class=\"line\">#if CDV_ENABLE_EXEC_LOGGING</span><br><span class=\"line\">  #define CDV_EXEC_LOG NSLog</span><br><span class=\"line\">#else</span><br><span class=\"line\">  #define CDV_EXEC_LOG(...) do &#123;&#125; while (NO)</span><br><span class=\"line\">#endif</span><br></pre></td></tr></table></div></figure>\n","prev":{"title":"CocoaPods Pod Install 错误解决","link":"CocoaPods-Pod-Install-错误解决"},"next":{"title":"升级xcode之后项目编译错误","link":"升级xcode后项目编译错误"},"plink":"https://wuwb.github.io/cordova/","reward":true,"copyright":{"author":"吴文斌","link":"<a href=\"https://wuwb.github.io/cordova/\" title=\"CDVAvaliability.h 源码分析\">https://wuwb.github.io/cordova/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-nd/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)"}}