{"title":"mac 安装 minikube 方法","date":"2019-10-22T05:25:19.000Z","link":"mac-安装-minikube-方法","comments":true,"updated":"2020-04-15T21:36:20.855Z","content":"<h2 id=\"需求\">需求<a href=\"mac-安装-minikube-方法#需求\"></a></h2><ul>\n<li>macOS 10.12(Sierra)</li>\n<li>安装有 Hyperkit, Parallels, VirtualBox 或 VMware Fusion 虚拟层</li>\n</ul>\n<h2 id=\"安装\">安装<a href=\"mac-安装-minikube-方法#安装\"></a></h2><p>有两种安装方法，一个通过 brew 安装，也是推荐的方式，一个是通过脚本直接安装。</p>\n<a id=\"more\"></a>\n\n<p>用 brew 安装</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">brew </span>cask <span class=\"keyword\">install </span>minikube</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -LO https:<span class=\"regexp\">//</span>storage.googleapis.com<span class=\"regexp\">/minikube/</span>releases<span class=\"regexp\">/latest/mi</span>nikube-darwin-amd64 \\</span><br><span class=\"line\">  &amp;&amp; sudo install minikube-darwin-amd64 <span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/bin/mi</span>nikube</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"升级\">升级<a href=\"mac-安装-minikube-方法#升级\"></a></h2><p>通过 brew 安装的升级比较简单，执行下列命令即可</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">rm</span> /usr/local/<span class=\"keyword\">bin/minikube</span></span><br><span class=\"line\"><span class=\"keyword\">brew </span>cask reinstall minikube</span><br></pre></td></tr></table></div></figure>\n\n<p>通过脚本安装的话，应该重新执行下脚本就可以（猜测）。</p>\n<h2 id=\"虚拟层配置\">虚拟层配置<a href=\"mac-安装-minikube-方法#虚拟层配置\"></a></h2><p>mac 下推荐使用 Hyperkit, 比较简单</p>\n<h3 id=\"需要\">需要<a href=\"mac-安装-minikube-方法#需要\"></a></h3><ul>\n<li>macOS 10.11+</li>\n<li>HyperKit</li>\n</ul>\n<h3 id=\"Hyperkit-安装\">Hyperkit 安装<a href=\"mac-安装-minikube-方法#Hyperkit-安装\"></a></h3><ul>\n<li>如果电脑已经装了 Docker for Desktop，那就已经有 Hyperkit 了。</li>\n<li>没有的话可以通过 brew 安装</li>\n</ul>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">brew </span><span class=\"keyword\">install </span>hyperkit</span><br></pre></td></tr></table></div></figure>\n\n<ul>\n<li>另外也可以通过 <a href=\"https://github.com/moby/hyperkit\" target=\"_blank\" rel=\"noopener\">github 源码安装</a></li>\n</ul>\n<h3 id=\"使用方法\">使用方法<a href=\"mac-安装-minikube-方法#使用方法\"></a></h3><p>使用 hyperkit 驱动启动 cluster</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minikube <span class=\"built_in\">start</span> <span class=\"comment\">--vm-driver=hyperkit</span></span><br></pre></td></tr></table></div></figure>\n\n<p>将 hyperkit 设置为默认驱动</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minikube<span class=\"built_in\"> config </span><span class=\"builtin-name\">set</span> vm-driver hyperkit</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"了解-Kubernetes\">了解 Kubernetes<a href=\"mac-安装-minikube-方法#了解-Kubernetes\"></a></h2><p>启动后，可以通过常规的 Kubernetes 命令来和 minikube cluster 进行交互。比如，可以通过下列命令来查看 pod 的状态。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl <span class=\"builtin-name\">get</span> po -A</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"增加分配的内存\">增加分配的内存<a href=\"mac-安装-minikube-方法#增加分配的内存\"></a></h2><p>minikube 默认值分配 2GB 内存，只够普通的部署，如果需要更大规模的部署，可以通过 <code>--memory</code> 标签增加分配的内存。或者通过下列命令将内存分配参数存起来持久化。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minikube<span class=\"built_in\"> config </span><span class=\"builtin-name\">set</span> memory 4096</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"参考\">参考<a href=\"mac-安装-minikube-方法#参考\"></a></h3><ul>\n<li><a href=\"https://github.com/kubernetes/minikube\" target=\"_blank\" rel=\"noopener\">https://github.com/kubernetes/minikube</a></li>\n<li><a href=\"https://minikube.sigs.k8s.io/docs/start/macos/\" target=\"_blank\" rel=\"noopener\">https://minikube.sigs.k8s.io/docs/start/macos/</a></li>\n</ul>\n","prev":{"title":"Performance","link":"docs-javascript-MDN-web-api-2019-11-01-performance"},"next":{"title":"用 docker compose 部署 odoo 12","link":"用-docker-compose-部署-odoo-12"},"plink":"https://wuwb.github.io/mac-安装-minikube-方法/","toc":[{"title":"需求","id":"需求","index":"1"},{"title":"安装","id":"安装","index":"2"},{"title":"升级","id":"升级","index":"3"},{"title":"虚拟层配置","id":"虚拟层配置","index":"4","children":[{"title":"需要","id":"需要","index":"4.1"},{"title":"Hyperkit 安装","id":"Hyperkit-安装","index":"4.2"},{"title":"使用方法","id":"使用方法","index":"4.3"}]},{"title":"了解 Kubernetes","id":"了解-Kubernetes","index":"5"},{"title":"增加分配的内存","id":"增加分配的内存","index":"6","children":[{"title":"参考","id":"参考","index":"6.1"}]}],"reward":true,"copyright":{"author":"吴文斌","link":"<a href=\"https://wuwb.github.io/mac-安装-minikube-方法/\" title=\"mac 安装 minikube 方法\">https://wuwb.github.io/mac-安装-minikube-方法/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-nd/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)"}}