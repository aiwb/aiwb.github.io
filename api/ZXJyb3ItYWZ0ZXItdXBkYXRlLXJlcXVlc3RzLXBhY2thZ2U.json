{"title":"更新 requests 包之后报 has no attribute '__getitem__' 的错","date":"2014-03-12T16:00:00.000Z","link":"error-after-update-requests-package","comments":true,"tags":["python","request"],"categories":["代码"],"updated":"2020-04-15T21:36:20.851Z","content":"<p>翻代码的时候看到段一年多前用 python 写的下载图片站图片的代码。</p>\n<p>测试下看还能不能下到图片，结果发现跑不起来了，报了个如下的错误：</p>\n<p>TypeError: ‘instancemethod’ object has no attribute ‘<strong>getitem</strong>‘<br>谷歌一下发现是 requests 包升级后不兼容老版本造成的</p>\n<p>解决方法是安装 requests-transition 这个包，</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip <span class=\"keyword\">install</span> requests-transition</span><br></pre></td></tr></table></div></figure>\n\n<p>然后如果你原来的代码中使用的是 requests 0.x 版本的话，将</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br></pre></td></tr></table></div></figure>\n\n<p>改成</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests0 <span class=\"keyword\">as</span> requests</span><br></pre></td></tr></table></div></figure>\n\n<p>如果原来的包是 1.0 版的，改成</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests1 <span class=\"keyword\">as</span> requests</span><br></pre></td></tr></table></div></figure>\n\n<p>参考：</p>\n<p>How to make an orderly transition to Python Requests 1.0 instead of running around in a panic</p>\n","prev":{"title":"2014-03-14","link":"android学习笔记"},"next":{"title":"火狐浏览器表单错误验证消息","link":"火狐浏览器表单错误验证消息"},"plink":"https://wuwb.github.io/error-after-update-requests-package/","reward":true,"copyright":{"author":"吴文斌","link":"<a href=\"https://wuwb.github.io/error-after-update-requests-package/\" title=\"更新 requests 包之后报 has no attribute '__getitem__' 的错\">https://wuwb.github.io/error-after-update-requests-package/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-nd/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)"}}