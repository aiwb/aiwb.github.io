{"title":"swipe组件使用注意事项","date":"2015-06-02T16:16:40.000Z","link":"swipe组件使用注意事项","comments":true,"tags":["javascript"],"categories":["代码"],"updated":"2020-04-15T21:36:20.851Z","content":"<p><a href=\"https://github.com/thebird/Swipe\" target=\"_blank\" rel=\"noopener\">Swipe</a></p>\n<p>先放出本文的主角，就是上面的 Swipe 组件。</p>\n<p>这个组件兼容性性能做的都还好，我们对其做了一些优化后，大量使用在蘑菇街的网站上。</p>\n<p>但是在使用的过程中有几点需要注意的地方：</p>\n<ol>\n<li>初始化获取的swipe获取是原生dom不是jquery对象，jquery对象需要加[0]转成原生对象</li>\n<li>需求通常会要求只有一张图的时候不能滑动。</li>\n<li>很多时候在幻灯片子元素只有两个时候continuous不需要设置为ture，可以设为false，以优化性能。</li>\n</ol>\n<p>解决上诉b+c遇到问题就是，一张幻灯片的时候不初始化swipe，两张的时候不设置continuous和auto。</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 幻灯片存在，则初始化</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>( $(<span class=\"string\">\"#head_slider\"</span>).length &gt; <span class=\"number\">0</span> ) initHeadSlider($(<span class=\"string\">\"#head_slider\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">initHeadSlider</span>(<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 获取slideBox</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> slideBox = obj;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 如果ul个数大于1，初始化滑动组件,且只有两屏的时候无法回滚</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(slideBox.find(<span class=\"string\">'.head_banner'</span>).length &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> continuous = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> auto = <span class=\"number\">2500</span>;</span><br><span class=\"line\">        <span class=\"comment\">// 如果幻灯片为2时不自动滚动和循环滚动</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (slideBox.find(<span class=\"string\">'.head_banner'</span>).length &lt;= <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">            continuous = <span class=\"literal\">false</span>;</span><br><span class=\"line\">            auto = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> mySwipe=<span class=\"keyword\">new</span> Swipe(slideBox[<span class=\"number\">0</span>],&#123;</span><br><span class=\"line\">            auto:auto,</span><br><span class=\"line\">            continuous:continuous,</span><br><span class=\"line\">            callback: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">index, element</span>) </span>&#123;</span><br><span class=\"line\">                slideBox.find(<span class=\"string\">\".swipe_indicator li\"</span>).removeClass(<span class=\"string\">\"active\"</span>).eq(index).addClass(<span class=\"string\">'active'</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n","prev":{"title":"固定宽高自适应屏幕的实现","link":"固定宽高自适应屏幕的实现"},"next":{"title":"Node中base64编码与解码","link":"Node中base64编码与解码"},"plink":"https://wuwb.github.io/swipe组件使用注意事项/","reward":true,"copyright":{"author":"吴文斌","link":"<a href=\"https://wuwb.github.io/swipe组件使用注意事项/\" title=\"swipe组件使用注意事项\">https://wuwb.github.io/swipe组件使用注意事项/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\\\"https://creativecommons.org/licenses/by-nc-nd/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)"}}